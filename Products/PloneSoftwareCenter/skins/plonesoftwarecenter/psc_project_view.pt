<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      lang="en"
      i18n:domain="plonesoftwarecenter"
      metal:use-macro="here/main_template/macros/master">

<head>
    <metal:css fill-slot="css_slot">
      <style type="text/css" media="all"
             tal:content="string:@import url($portal_url/plonesoftwarecenter.css);"></style>
    </metal:css>
</head>

<body>

<div metal:fill-slot="main"
     tal:define="view context/@@project_view">

  <div metal:define-macro="main" tal:define="latestRelease view/latest_release;
                                             upcomingReleases view/upcoming_releases | nothing">

        <h1 class="documentFirstHeading">
            <span tal:replace="here/title_or_id">Title or id</span>
        </h1>


        <p class="documentDescription"
             tal:content="here/Description">
            description
        </p>
        
        <p class="portalMessage info"
           i18n:translate="description_cannot_add_before_approved"
           tal:condition="python: is_editable and not view.is_public()">
           You can not add releases, documentation or feature proposals until the
           project itself is approved, make sure you submit it for approval when
           the relevant project information has been entered.
        </p>

        <tal:nostable condition="nocall:not:latestRelease">
        
                <h2>Current release</h2>
                <p>
                    No stable release available yet.
                </p>

                <tal:noreleases tal:condition="python:latestRelease is None and not upcomingReleases">

                    <p class="discreet"
                       tal:condition="here/getRepository">
                        If you are interested in getting the source code of 
                        this project, you can get it from the 
                        <a href=""
                           class="link-plain"
                           title="Version control repository location for this project"
                           tal:attributes="href here/getRepository">
                           code repository</a>.
                    </p>

                    <p class="discreet"
                       tal:condition="python: is_editable and view.is_public()">
                        <a i18n:translate="label_goto_release_folder"
                           tal:attributes="href view/release_folder_url">
                          Go to the release folder to add or publish a release.
                        </a>
                    </p>

                    <p class="discreet"
                       tal:condition="python:is_editable and view.is_public()">
                         <tal:noreleases i18n:translate="description_no_available_releases">
                            There are no published releases in this project yet.
                         </tal:noreleases>
                         <tal:prioritize i18n:translate="description_prioritize_releases">
                            This listing will prioritize final releases,
                            but will list the latest published release of any 
                            other type if no final release exists. If you list
                            the source code repository in this project, it 
                            will show up, so people know where to go to check 
                            out in the code in the meantime.
                         </tal:prioritize>
                    </p>

                </tal:noreleases>

        </tal:nostable>

        <tal:stable condition="nocall:latestRelease">
        <div class="pane">
           <h2>
              Current release <br />
              <a href="#"
               tal:attributes="href latestRelease/absolute_url"
               tal:content="latestRelease/Title">Ploneboard 1.0</a>
            </h2>

            <p class="discreet">
                <tal:releasedate condition="latestRelease/effective">
                    Released <span tal:replace="view/latest_release_date" />
                </tal:releasedate>
                
                <tal:compatibility condition="latestRelease/getCompatibility">
                    &mdash; tested with
                    <metal:versions
                     metal:use-macro="python:latestRelease.widget('compatibility')">
                    Plone 1.0, Plone 2.0...
                    </metal:versions>
                </tal:compatibility>
            </p>

                <p tal:condition="latestRelease/Description">
                <span tal:replace="latestRelease/Description">
                 Main focus for this release is blah blah.
                </span><br />
                <a href="#"
                   i18n:translate="label_release_details"
                   tal:attributes="href latestRelease/absolute_url">More about this release&hellip;</a>
                </p>
                
                <dl>
                  <tal:downloads repeat="file latestRelease/contentValues">
                  <dt>
                      <a class="link-plain"
                         tal:attributes="href file/@@file_view/direct_url">
                        <img src="" alt="" 
                             style="float: left; clear:left; display: block; margin: 0 0.5em 0.5em 0;"
                             tal:attributes="src string:${here/portal_url}/${file/@@file_view/downloadicon_name}" />
                      </a>
                      
                      <a class="link-plain"
                         tal:attributes="href file/@@file_view/direct_url">
                        <span i18n:translate="label_get">Get</span>
                        <span tal:replace="here/Title">Ploneboard 1.0</span>
                        for
                        <span tal:replace="file/getPlatform" /></a>
                        <span class="discreet"
                                  tal:define="fileSize file/@@file_view/file_size">
                              <tal:size tal:condition="fileSize">
                                   (<span tal:replace="fileSize">256KB</span>)
                              </tal:size>
                              <tal:extsize condition="not: fileSize">
                                  <tal:extfile condition="file/getExternalFileSize">
                                  (<span tal:replace="file/getExternalFileSize">256KB</span>)
                                  </tal:extfile>
                              </tal:extsize>
                        </span>
                        </dt>

                  <dd class="discreet" tal:content="file/Title">
                          Windows installer.
                  </dd>

                  </tal:downloads>
                </dl>
        </div>
        </tal:stable>

        <div class="visualClear"></div>

        <h2>Project Description</h2>

    <div style="float:right; margin: 0 0 0.5em 1em;"
         tal:condition="here/getLogo | nothing">
        <a tal:omit-tag="not: here/getLogoURL"
           tal:attributes="href here/getLogoURL">
            <img tal:replace="structure here/getLogo" />
        </a>
    </div>


        <div tal:replace="structure here/getText" />

        <div class="visualClear"></div>
        
        <tal:block tal:condition="python: view.has_criteria_info()">
            <h2>Self-Certification</h2>
            <tal:block repeat="criterion view/criteria_info">
                <p>
                    <tal:block condition="criterion/selected">[X]</tal:block>
                    <tal:block condition="not:criterion/selected">[ ]</tal:block>
                    <tal:block content="criterion/text" />
                </p>
            </tal:block>
        </tal:block>
        
        <tal:block tal:condition="view/has_review_comment|nothing"> 
            <h2>Independent Review</h2>
            <p content="structure here/getReviewComment" /> 
            <p tal:condition="here/isApproved|nothing">
                <i>This project has been approved via independent review.</i>
            </p>
        </tal:block> 
        
        <div class="visualClear"></div>


    </div>

</div>

</body>
</html>
